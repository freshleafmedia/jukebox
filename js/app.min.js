!function e(n,t,i){function o(c,s){if(!t[c]){if(!n[c]){var d="function"==typeof require&&require;if(!s&&d)return d(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+c+"'")}var l=t[c]={exports:{}};n[c][0].call(l.exports,function(e){var t=n[c][1][e];return o(t?t:e)},l,l.exports,e,n,t,i)}return t[c].exports}for(var a="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(e,n,t){function i(){gapi.client.setApiKey("AIzaSyC5ZNaxUE7HwOxi6r5xMq9aeRlUVdJXU7I"),gapi.auth.init(function(){gapi.client.load("youtube","v3",function(){a()})})}function o(e,n){if(window.Notification)if("granted"===Notification.permission){new Notification(e,{body:n,icon:"/favicon.ico"})}else Notification.requestPermission(function(t){new Notification(e,{body:n,icon:"/favicon.ico"})})}function a(){$("#search").prop("disabled",!1)}function c(e){var n=gapi.client.youtube.search.list({q:e,part:"snippet",maxResults:"25"});n.execute(function(e){console.log(e.result),$("#search-container").html(""),$.each(e.result.items,function(e,n){if("youtube#video"==n.id.kind){var t=$("<div />",{"class":"songResult"});t.data("url",n.id.videoId);var i=$("<img />",{src:n.snippet.thumbnails["default"].url}),o=$("<div />"),a=$("<p />",{text:n.snippet.title,"class":"title"});o.append(a);var c=$("<div />",{"class":"imageWrapper"});c.append(i),t.append(c),t.append(o),$("#search-container").append(t)}})})}function s(e){console.log("Adding.. "+e.id),p.emit("addsong",e)}function d(){$("#addDialog").show(),$("#search").focus().val("")}function l(){$("#addDialog").hide()}function r(e,n){var t=$("<div />",{"class":"songResult",id:"song-"+e.id});t.attr("data-resolving",!!n);var i=$("<img />",{src:e.thumbnail}),o=$("<p />",{"class":"title",text:e.title}),a=$("<div />",{"class":"imageWrapper"});a.append(i),t.append(a),t.append(o),$(".queue-container").append(t)}function u(e){$(".queue-container").html(""),$.each(e,function(e,n){r(n)})}function f(e){""==e?$("title").text("Freshleaf Jukebox"):$("title").text(e+" - Freshleaf Jukebox")}var p=io("//:3000");p.on("connect",function(){console.log("connected to websocket server")}),p.on("disconnect",function(){console.log("disconnected"),$(".media-controls .btn, #shutdown").addClass("disabled")}),setTimeout(i,1e3),$("#search").on("keyup",function(){c($("#search").val())}),$("#search-container").on("click","> div",function(){var e={id:$(this).data("url"),title:$(this).find("p.title").text(),thumbnail:$(this).find("img").attr("src")};s(e),$(this).addClass("added")}),$("#pauseButton").click(function(){p.emit("pause")}),$("#playButton").click(function(){p.emit("play")}),$("#addButton").click(function(){d()}),$(document).keyup(function(e){$(e.target).is("input")||(65==e.keyCode||13==e.keyCode)&&d(),27==e.keyCode&&l()}),$("#addDialogClose").click(function(){l()}),$("#volupButton").click(function(){p.emit("volUp")}),$("#voldownButton").click(function(){p.emit("volDown")}),$("#forwardButton").click(function(){p.emit("skipsong")}),p.on("newsong",function(e){console.log("From websocket: new song"+e.id),r(e),o("New Song Added",e.title)}),p.on("resolved",function(e){$(".queue-container #song-"+e.id+'[data-resolving="true"]').remove()}),p.on("resolving",function(e){r(e,!0)}),p.on("resolved failed",function(e){$(".queue-container #song-"+e.id).attr("data-resolving","failed")}),p.on("queuelist",function(e){console.log("From websocket: whole list"),u(e);var n=$(".queue-container"),t=n.find("> :first-child .title").text();f(t)}),p.on("song finished",function(){var e=$(".queue-container");if(e.find("> :first-child").remove(),e.find("> div").length>0){var n=e.find("> :first-child .title").text();o("Next Up",n),f(n)}else f("")}),p.on("controlstatus",function(e){var n=$("#pauseButton"),t=$("#playButton");e.paused?(n.addClass("disabled"),t.removeClass("disabled")):(n.removeClass("disabled"),t.addClass("disabled"))}),$(window).on("scroll",function(){var e=window.pageYOffset,n=120;e>n?$("header").addClass("scrolled"):$("header").removeClass("scrolled")})},{}]},{},[1]);